
1)  устанавливаем notepad++

2)  устанавливаем wampserver в каталог c:/web

3)  для wampserver в wampmanager.conf ставим editor = "C:/Program Files (x86)/Notepad++/notepad++.exe"

4)  делаем checkout проекта по указанному URL и пути
    svncheckout:
    "http://svn.sbat.ru/svn/view_transport/web_viewer/trunk/projectlogist.ru/www"
    "C:\web\wamp\www\projectlogist.ru"
 
    "http://svn.sbat.ru/svn/view_transport/web_viewer/trunk/sbat.logist.ru"
    "C:\web\wamp\www\sbat.logist.ru"

5)  делаем еще один checkout по URL "http://svn.sbat.ru/svn/view_transport/"
    в любое удобное место на компьютере(для работы с документами)


6)  из панели управления wampserver открываем файл httpd.conf и в нем убираем комментарий 
	
    # Virtual hosts
    Include conf/extra/httpd-vhosts.conf

7)  добавляем в файл C:\Windows\System32\drivers\etc\hosts следующее содержание:
    
    127.0.0.1      projectlogist.ru
    127.0.0.1      sbat.logist.ru
	    

8)  заменяем содержание файла C:\web\wamp\bin\apache\apache2.4.9\conf\extra\httpd-vhosts.conf
    следующим контентом:

----FILE-CONTENT-INSIDE----

# Virtual Hosts
#
# Required modules: mod_log_config

# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at 
# <URL:http://httpd.apache.org/docs/2.4/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# Use name-based virtual hosting
#
NameVirtualHost *


#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
DocumentRoot "c:/web/wamp/www"
ServerName localhost
</VirtualHost>

<VirtualHost *:80>
DocumentRoot "c:/web/wamp/www/projectlogist.ru"
ServerName projectlogist.ru
</VirtualHost>

<VirtualHost *:80>
DocumentRoot "c:/web/wamp/www/sbat.logist.ru"
ServerName sbat.logist.ru
</VirtualHost>

----FILE-CONTENT-INSIDE-END----

9)  скачиваем, устанавливаем phpStorm и создаем 2 проекта:
Create New Project from Existing Files

Web server is installed locally, source files are located under its document root.

Project root is C:\web\wamp\www\projectlogist.ru
use projlog Server with http://projectlogist URL. (сервер должен быть запущен)

Project root is C:\web\wamp\www\sbat.logist.ru
use sbat Server with http://sbat.logist.ru URL. (сервер должен быть запущен)


10) подключаем базу данных к проекту:

заходим из браузера по адресу http://localhost/phpmyadmin/
там выбираем вкладку SQL и копируем туда содержание скрипта ..\trunk\documents\create.sql
нажимаем 'ок' и обновляем страницу, должна появится БД 'requestdb'

в phpStorm:
нажимаем alt+Insert в окне Database
скачиваем драйвера при помощи ссылки внизу
host = localhost
Database = "" // emptyString
User = root
Password = "" // emptyString
port = 3306

нажимаем кнопку "TestConnection" соединение должно пройти успешно.
запускаем скрипт createUsers
в Datasource properties меняем пароль root user, на тот, что указан в скрипте и перезапускаем соединение

запускаем скрипт create.sql - будет создана БД 'requestDB'
запускаем скрипт newDB.sql - будет создана БД 'project_database'

для того, чтобы эти БД отображались, необходимо зайти в Datasource properties -> Shemas&Tables и там поставить галки у этих схем.



11) создаем конфигурацию для запуска:
выбираем в правом верхнем углу "edit configurations"
там во нажимаем зеленый плюс и добавляем PHP Web Application 
добавляем сервер = projlog, debugger - XDebug, Port 80;
start URl = /
Browser = Chrome(должен быть установлен)

12) для того, чтобы не было проблем с кодировками нужно добавить в файл httpd.conf строку
AddDefaultCharset UTF-8
а также возможно в файл .htaccess
IndexOptions +Charset=UTF-8

в файле php.ini раскомментировать строку 
default_charset = "UTF-8"




-- DEPLOYMENT SETTINGS
https://confluence.jetbrains.com/display/PhpStorm/Deploying+PHP+applications+with+PhpStorm

 Tools | Deployment | Configuration
 name: productionServer
 type: FTP

ftp host: 185.75.182.92
Port: 21
root path: /web/transport.sbat.ru/public_html/
userName: transmaster
password: CXSKNJaVKV
web server root URL: http://transport.sbat.ru
advanced options: set encoding UTF-8


MAPPINGS:
Local Path: C:\web\wamp\www\sbat.logist.ru
Deployment path on server: /
Web path on server: /

EXCLUDED:
/common_files/dao/db_connection.ini
/common_filed/dao/SQL/
/_examples/
/common_files/dao/templateDao1

Tools | Deployment | Browse Remote Hosts : view server content\

DEPLOYING:

Deployment | Upload to <server name> (or Deployment | Upload to...
if you want to download from server make right ckick on folder inside remote host panel;

SERVER DATATASE Configuration
create new datasource: MySQL - production
host: transport.sbat.ru
user: transmaster_ttt
pass: ddTH4sxgON


connection to database with phpStorm;
http://185.75.182.92/phpmyadmin/

user: transmaster_ttt
pass: ddTH4sxgON

databaseName: transmaster_transport_db


important - add this file " /common_files/dao/db_connection.ini" in excluded list
important - add this directory "/common_files/dao/templateDao1" in excluded list
















































